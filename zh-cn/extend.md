# 延长灯带 最佳实践

以下内容及方案仅针对HassLight LED智能控制器及配套的氛围灯带、灯串。因不同厂家灯带素质参差不齐，以下**实验数据**和**经验分享**不代表其他灯带也能达到同样的效果表现，当然原理是一样的，供参考。

## 问题
* 家居装饰氛围灯带最长可以接多少米？ 需要些什么？ 
* 我一共需要几个智能控制器？
* 如何延长氛围灯带(WS2811/WS2812)？

## 压降 和 电压注入 (Voltage Drop & Power Injection)

**压降**：电流流过灯带之后，末端电压相对与起始端的电压变化

以连接2卷5米的氛围灯带为例，起始端的电压是12.25V，第一卷末端电压是10.00V，第二卷末端电压是7.18V。  
压降就使得灯带的颜色不对了，从第三幅图可以看到，纯色模式下，第二卷灯带的白色明显发黄。

从实验来看，20%的压降基本不影响灯带各种效果，20-30%的压降动画效果OK，白色会明显发黄，超过30%灯带效果就大打折扣了。从灯带产品的封装来看也是符合此规律，每卷5米(60灯珠/米)，都留有电压注入的接线头。

  起始电压 | 第一卷末端电压 | 第二卷末端电压 |
  --  | -- | -- 
![](../imgs/diy/voltage1.jpg ':size=400') | ![](../imgs/diy/voltage2.jpg ':size=400') | ![](../imgs/diy/voltage3.jpg ':size=400') 


 **电压注入**：在灯带中间或者末端注入电压，解决压降问题

还是以刚才的2卷灯带为例，可以从第一卷灯带的末端接入电源，这样偏色问题就解决了。

  接头 | 接法 | 
  --  | -- 
![](../imgs/diy/strip-wire.jpg ':size=400') | ![](../imgs/diy/strip-wire2.jpg ':size=400') 

## 电压注入 和 电源功率

12V灯带电气数据如下，实际功率到不了最大，60W电源也足够，以此作为参考，规划你所需要的最大电源功率。

    灯珠：60 珠/米
    长度：5米
    电压：12V
    最大功率：72W

### 单电源供电方案

  理论值如下，实际情况下360W以上的12V电源已经不多见了，也就是单电源供电方案，也就适合30米以内的情况。单电源供电的接线方式比较简单，长度受制于电源功率上限。  
  **电压注入**：每5米，在下一段灯带的红白线处，接电源正负极。  
  

  灯带长度 | 灯珠数 | 电源功率 | 
  --      | --     | --       |
  5米     | 300    | 60-72W   |
  10米    | 600    | 120-144W |
  15米    | 900    | 180-216W |
  20米    | 1200   | 240-288W |
  30米    | 1500   | 360-432W |
  40米    | 1800   | 480-576W |
  50米    | 2100   | 600-720W |

  **注意**：30米以上为理论数据

### 多电源供电方案

  多电源供电方式，需要电源的总功率和上表是一样的，优点是补电压方式相对灵活，可以选择最近的灯带连接处补充电压。
  
  **注意**：  
  1. 灯带之间的连接线不是直插连接，**只接绿色信号线、白色地线（负极）；正极红色未接**
  2. 控制器及各个灯带都可以单独供电，控制器也可以和灯带共用某一个电源
  3. 不同电源需要**共地**，即示意图中的黑线（灯带实物白色地线）  

  **接线示意图**
  ![](../imgs/diy/multiple-power-supply.png ':size=800')

## 解答
  在了解到压降和电压注入的这些背景之后，你就知道了上面提出的问题，没有一个简单的数字来回答的标准答案。
  假设我们选择60珠/米的灯带，总长30米可作为基准参考，如果换成30珠/米的灯带方案也就是可以达到60米，具体方案需要按照你的使用场景，做出合适的方案选择。
  另外别忘了，这些灯带都是可以剪裁再连接的。

**固件层面**
  1. Homekit目前限制了最多600珠，如果使用60珠/米的灯带，也就是10米。淘宝上也有不同规格的比如30珠/米，或者48珠/米，甚至是100珠/米，这些我们可以帮您做固件定制。  
  2. HomeAssistant固件目前限制也是10米，也可以定制。
  3. WLED固件可以在运行时动态设置灯珠总数，推荐的上限是1000，但是没有限制你继续往上调。
  4. 理论极限值我们没有用实物测试，30米可以作为基准参考，30米以上还请自行测试。

